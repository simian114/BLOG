---
title: MDX 의 TOC 를 만들어보자
date: 2023-04-16
isPublished: true
publishedAt: "2023-04-16"
description: TOC는 table of contents의 약자다
tags:
  - { content: "contentlayer", colorType: "primary" }
  - { content: "radix", colorType: "secondary" }
  - { content: "TOC", colorType: "tertiary" }
---

## Table Of Contents 란

> 목차

---

## MDX 파일로부터 heading 정보 읽어오기

> contentlayer

### computedFields 로 만들면 타입이 자동 생성되지 않음

> `defineNestedType` 로 만든 타입

normal fileds 영역에 `defineNestedType` 을 사용하는 임시 필드를 하나 생성. 이 필드는 실제로 사용하지 않기 때문에 required 를 false 로 한다.
이렇게 하면 타입이 자동 생성된다.

---

## html / css

> mdn 참고

html / css 로 기본 뼈대를 잡는 과정은 mdn 사이트를 참고했다. 브라우저의 height 가 굉장히 작아진 경우에 stiky 로 고정된 사이드바 영역을 scroll 처리해서 핸들링한 부분이 인상적이었다.
그래서 나도 그렇게 만들었다.

---

## 현재 포커싱 되어있는 섹션 하이라이팅

> intersection observer -- scroll event

intersection observer 을 사용해 보려했지만.. 잘안되서 scroll event 를 이용해서 구현.

---

## 모바일 환경에서의 핸들링

> radix-popover

모바일에 목차가 나오는건 공간 낭비가 심하다고 생각. 그렇다고 해서 목차를 노출시켜주지 않으면 포스트를 한번에 파악하기 어려울거라 생각함.
해결은 fixed 되어있는 버튼을 하나 만들고, 해당 버튼을 누르면 toc 를 보여주도록했다.

<br />
원래 컴포넌트 라이브러리는 사용하지 않으려고 했는데... 여기서 사용해버렸다 호호
